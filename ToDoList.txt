# linux-maint — ToDoList (roadmap refresh)

This is the single backlog source of truth.

## Working style
- Prefer small, test-backed PRs.
- Avoid breaking contract changes without explicit versioning.
- Optimize for safe defaults and clear operator guidance.
- Keep dark-site/offline reliability a top priority.

## Priorities
- **P0**: correctness, reliability, determinism
- **P1**: operator UX and documentation
- **P2**: security and hardening
- **P3**: observability and integrations
- **P4**: DX/release polish

---

## P0 — Correctness / reliability

### P0.1 Make smoke tests deterministic in non-root environments
**Why**: CI and local runs should not hang or emit avoidable platform noise.
**Scope**:
- Guard SELinux-related calls in tests to avoid noisy errors under non-root.
- Ensure test helpers do not attempt writes under `/var/*` unless sudo-gated.
- Tighten timeouts on tests that can hang.
**Acceptance**:
- `make test` finishes reliably without manual intervention.
- No repeated warnings in smoke output when running without sudo.

### P0.2 Add JSON schema validation for automation outputs (DONE 2026-02-18)
**Why**: `status --json` and `doctor --json` are automation surfaces.
**Scope**:
- Add schemas under `docs/schemas/`.
- Add tests that validate JSON output against schemas.
**Acceptance**:
- Schemas exist and tests validate output in repo mode.

### P0.3 Harden wrapper summary emission (DONE 2026-02-18)
**Why**: summary artifacts are the core contract.
**Scope**:
- Ensure wrapper never emits duplicate or malformed `monitor=` lines.
- Add a lint test that fails on malformed lines.
**Acceptance**:
- New lint test fails on malformed lines and passes on normal runs.

---

## P1 — Operator UX / documentation

### P1.1 Add “first run expectations” to README (DONE 2026-02-18)
**Why**: new users need to know which SKIPs are normal.
**Acceptance**:
- README includes a short list of normal first-run SKIPs and what to do next.

### P1.2 Add example outputs (text + JSON) (DONE 2026-02-18)
**Why**: examples speed troubleshooting.
**Acceptance**:
- `docs/reference.md` includes short examples for `status`, `status --json`, `doctor --json`, `trend --json`.

### P1.3 Add a “Repo vs Installed” decision guide in docs (DONE 2026-02-18)
**Why**: reduce confusion about modes.
**Acceptance**:
- `docs/README.md` or `docs/QUICK_REFERENCE.md` has a short decision guide.

---

## P2 — Security / hardening

### P2.1 Add least-privilege guidance for SSH mode (DONE 2026-02-18)
**Why**: operators need a safe baseline for sudoers and SSH keys.
**Acceptance**:
- `docs/reference.md` includes a minimal sudoers snippet and SSH guidance.

### P2.2 Optional redaction toggle for logs (DONE 2026-02-18, export-json redaction added)
**Why**: avoid accidental secret leakage.
**Acceptance**:
- Add a toggle that redacts known patterns in logs and summary JSON.
- Document how to enable it.

---

## P3 — Observability / integrations

### P3.1 Add `linux-maint export --json` (DONE 2026-02-18)
**Why**: a single payload for SIEM/ELK/monitoring ingestion.
**Acceptance**:
- Output includes `SUMMARY_RESULT`, `SUMMARY_HOSTS`, and `monitor=` lines.

### P3.2 Prometheus label cardinality guardrails
**Why**: large fleets can overrun Prometheus limits.
**Acceptance**:
- Configurable max unique `host`/`monitor` labels with clear drop behavior.

---

## P4 — DX / release polish

### P4.1 Improve changelog discipline (DONE 2026-02-18)
**Why**: users need a human-readable release summary.
**Acceptance**:
- Add a release note template and update `CHANGELOG.md` for release tags.

### P4.2 Provide a minimal containerized test harness (DONE 2026-02-18)
**Why**: consistent contributor experience.
**Acceptance**:
- Add `containers/` or `tools/dev_container.sh` with quick-start instructions.
