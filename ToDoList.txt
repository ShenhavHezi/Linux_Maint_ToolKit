# Linux_Maint_ToolKit — Roadmap & Backlog (2026-02-22)

## Project brief
Linux_Maint_ToolKit is a lightweight, offline‑friendly Linux maintenance and health toolkit.
It runs locally or via SSH, emits machine‑parseable summary lines, and keeps outputs stable for automation.
Primary audiences: operators, sysadmins, and SREs working in constrained or air‑gapped environments.

## Principles
- Bash‑only runtime; no new runtime dependencies.
- Machine outputs are clean and parse‑safe (stdout contract preserved).
- Minimal, reversible changes; strong tests + docs for any behavior change.

## Priority legend
- P0: correctness / safety
- P1: operator UX / docs
- P2: security / hardening
- P3: observability / integrations
- P4: DX / release polish

---

## Recently completed (2026-02-22)

1. Summary output hardening
   Outcome: one summary line per monitor/host; stdout kept machine‑clean.
   Acceptance: duplicate summaries suppressed; tests enforce no stdout noise.

2. Init safety (`linux-maint init --force`)
   Outcome: init never overwrites existing config unless `--force` is passed.
   Acceptance: tests verify non‑overwrite and forced overwrite behavior.

3. Operator docs expansion
   Outcome: first‑10‑minutes runbook and artifact/log reference added.
   Acceptance: new docs linked from doc indexes and README.

4. Release verification tool
   Outcome: `tools/release_check.sh` validates docs, schemas, and release notes.
   Acceptance: fails fast with actionable messages.

5. Make target: verify release
   Outcome: `make verify-release` wraps `linux-maint verify-release`.
   Acceptance: simple, documented target.

6. `linux-maint explain monitor <name>`
   Outcome: concise monitor description with deps and common reasons.
   Acceptance: output fits one screen and references `docs/REASONS.md`.

7. Export allowlist
   Outcome: `linux-maint export --json` supports `LM_EXPORT_ALLOWLIST`.
   Acceptance: rows restricted to allowlisted keys; tests added.

8. Report table empty header
   Outcome: `report --table` always prints a header, even with no problems.
   Acceptance: table header present in empty runs; tests pass in clean repo.

9. Status summary table empty header
   Outcome: `status --summary --table` prints a header even when no summary file exists.
   Acceptance: table header present in clean repo runs; tests pass.

10. SSH known_hosts mode switch
    Outcome: `LM_SSH_KNOWN_HOSTS_MODE=strict|accept-new` toggles SSH host key policy.
    Acceptance: strict uses `StrictHostKeyChecking=yes`; docs + tests updated.

11. Bundle file hashes
    Outcome: `pack-logs --hash` writes SHA256 per file into bundle metadata.
    Acceptance: bundle includes `meta/bundle_hashes.txt`; tests updated.

12. Trend/runtimes JSON contracts
    Outcome: JSON schemas for `trend --json` and `runtimes --json`.
    Acceptance: schema files added and validated in tests.

13. Strict run validation mode
    Outcome: `linux-maint run --strict` fails if any monitor emits malformed summary lines.
    Acceptance: wrapper rejects invalid lines; docs/tests updated.

14. Deterministic test mode
    Outcome: `LM_TEST_MODE=1` freezes timestamps and disables outbound actions for CI.
    Acceptance: deterministic timestamp tests pass; docs updated.

15. Structured fix output (`doctor --fix --json`)
    Outcome: structured `fix_actions` emitted with `id/action/status` (and target).
    Acceptance: schema + tests updated; human output unchanged.

16. Fleet summary grouping
    Outcome: `status --group-by <host|monitor|reason>` for large fleets.
    Acceptance: grouped output with totals and stable ordering.

17. One-screen report
    Outcome: `report --short` with totals, top problems, next steps.
    Acceptance: fits in ~25 lines; no loss of machine outputs.

18. First-run expectations banner
    Outcome: status/report call out expected SKIPs when baselines/config are missing.
    Acceptance: banner appears only when relevant.

19. Lightweight Prometheus summary
    Outcome: `status --prom` returns minimal textfile-style metrics.
    Acceptance: includes overall status + per-status counts.

20. Metrics snapshot command
    Outcome: `linux-maint metrics --json` returns status + trend + runtimes.
    Acceptance: stable schema and tests.

21. Agent hints
    Outcome: add `next_step=` hints for common reasons in summary output.
    Acceptance: documented and tested for at least 3 monitors.

22. Release note drafting workflow
    Outcome: GH Action drafts release notes from CHANGELOG Unreleased.
    Acceptance: draft created on tag push.

---

## P0 — Correctness / safety (next)

1. Summary JSON schema contract
   Outcome: JSON schema for wrapper summary JSON (`full_health_monitor_summary_latest.json`).
   Acceptance: schema file added and validated in tests.

2. Output cleanliness guardrail
   Outcome: ensure JSON/summary outputs never contain ANSI/control chars even when color is forced.
   Acceptance: tests assert outputs are clean across key commands.

---

## P1 — Operator UX / docs (next)

1. Group-by output limits
   Outcome: optional `--top N` for `status --group-by` to cap rows for large fleets.
   Acceptance: stable ordering; tests cover default and capped output.

2. Quickstart install doc polish
   Outcome: tighten `docs/OPERATIONS.md` with a 10-minute installed-mode walkthrough.
   Acceptance: operator path validated, no duplicate content in README.

---

## P2 — Security / hardening (soon)

1. Known_hosts seeding helper
   Outcome: helper script to pre-populate `LM_SSH_KNOWN_HOSTS` for strict mode.
   Acceptance: offline-safe and documented; no runtime deps added.

---

## P3 — Observability / integrations (later)

1. Run index JSON schema
   Outcome: schema for `run_index.jsonl` entries and history JSON contract.
   Acceptance: schema + tests; contract version documented.

---

## P4 — DX / release polish (later)

1. Docs link check in CI
   Outcome: CI job validates internal doc links (README + docs index).
   Acceptance: job fails on broken links; offline-safe.
