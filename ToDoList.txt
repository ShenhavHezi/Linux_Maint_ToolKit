# linux-maint — ToDoList (roadmap refresh)

This is the single backlog source of truth.

## Priorities
- **P0**: correctness, reliability, determinism
- **P1**: operator UX and documentation
- **P2**: security and hardening
- **P3**: observability and integrations
- **P4**: DX/release polish

---

## P0 — Correctness / reliability

### P0.1 Make smoke tests deterministic in non-root environments
**Why**: CI and local runs should not hang or emit avoidable platform noise.
**Scope**:
- Suppress or guard SELinux warnings when running under unprivileged test mode.
- Ensure tests do not attempt to write under `/var/*` unless explicitly gated.
**Acceptance**:
- `make test` finishes reliably without manual intervention.
- No repeated noisy warnings in smoke output for non-root runs.

### P0.2 Add a JSON schema or explicit contract fixture for `status --json` and `doctor --json`
**Why**: automation depends on stable output; schema validation reduces regressions.
**Acceptance**:
- Ship `docs/schemas/status.json` and `docs/schemas/doctor.json` (or similar).
- Add tests that validate JSON output against the schema.

---

## P1 — Operator UX / documentation

### P1.1 Add “first run” section to README (local + installed)
**Why**: reduce onboarding friction for new users.
**Acceptance**:
- README includes a short “first run” checklist and expected first-run SKIPs.

### P1.2 Add example outputs to docs (status, doctor, trend)
**Why**: concrete examples help operators debug quickly.
**Acceptance**:
- `docs/reference.md` includes short sample outputs for `status --json`, `doctor --json`, and `trend --json`.

### P1.3 Add a “Which mode should I use?” guide (repo vs installed)
**Why**: confusion between repo and installed modes is a common support issue.
**Acceptance**:
- `docs/README.md` or `docs/QUICK_REFERENCE.md` includes a brief decision guide.

---

## P2 — Security / hardening

### P2.1 Add least-privilege guidance for SSH mode
**Why**: operators need a clear, safe baseline for SSH permissions.
**Acceptance**:
- Add a section in `docs/reference.md` describing recommended `sudoers` snippets for limited commands.

### P2.2 Add redaction rules for logs (optional)
**Why**: prevent accidental leakage of secrets in logs/exports.
**Acceptance**:
- Provide a toggle to redact known sensitive patterns in summary/log output.
- Document how to enable it.

---

## P3 — Observability / integrations

### P3.1 Add a small `linux-maint export --json` command
**Why**: unify outputs for external tools (SIEM/ELK/monitoring).
**Acceptance**:
- Output includes `SUMMARY_RESULT`, `SUMMARY_HOSTS`, and `monitor=` lines in one JSON payload.

### P3.2 Add optional node_exporter label cardinality guardrails
**Why**: large fleets can overrun Prometheus limits.
**Acceptance**:
- Make max unique `host`/`monitor` label counts configurable with clear behavior when exceeded.

---

## P4 — DX / release polish

### P4.1 Improve changelog discipline
**Why**: users need a human-readable release summary.
**Acceptance**:
- Add a small release note template and update `CHANGELOG.md` on release tags.

### P4.2 Provide a minimal containerized test harness
**Why**: helps contributors run tests consistently.
**Acceptance**:
- Add a `tools/dev_container.sh` or `containers/` directory with quick-start instructions.
